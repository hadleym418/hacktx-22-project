{"ast":null,"code":"import _objectSpread from\"/Users/hadleymcpartlin/Documents/GitHub/hacktx-22-project/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/hadleymcpartlin/Documents/GitHub/hacktx-22-project/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _createForOfIteratorHelper from\"/Users/hadleymcpartlin/Documents/GitHub/hacktx-22-project/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _asyncToGenerator from\"/Users/hadleymcpartlin/Documents/GitHub/hacktx-22-project/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import data from'./data.json';var oldData=data;export function byDomain(){return _byDomain.apply(this,arguments);}function _byDomain(){_byDomain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var newData,_iterator,_step,_loop,data,_iterator2,_step2,domain,fullSize,openRate;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newData={domains:[]};_iterator=_createForOfIteratorHelper(oldData.domains);try{_loop=function _loop(){var item=_step.value;var mainDomain=item.domain.split('.').slice(-2).join('.');if(!newData.domains.find(function(e){return e.domain===mainDomain;})){var newItem={domain:mainDomain,count:1,emails:[{openStatus:item.data.openStatus,size:item.data.size}]};newData.domains.push(newItem);}else{var index=newData.domains.findIndex(function(x){return x.domain===mainDomain;});newData.domains[index].count++;newData.domains[index].emails.push({openStatus:item.data.openStatus,size:item.data.size});}};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}newData.domains.sort(function(a,b){return b.count-a.count;});newData.domains=newData.domains.slice(0,10);data={domains:[]};_iterator2=_createForOfIteratorHelper(newData.domains);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){domain=_step2.value;fullSize=domain.emails.reduce(function(a,b){return a+b.size;},0)/1000000;openRate=domain.emails.reduce(function(a,b){return a+b.openStatus;},0)/domain.emails.length*100;data.domains.push({domain:domain.domain,fullSize:fullSize.toFixed(2),openRate:openRate.toFixed(2),count:domain.count});}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}return _context.abrupt(\"return\",data);case 9:case\"end\":return _context.stop();}}},_callee);}));return _byDomain.apply(this,arguments);}export function byAuthor(){return _byAuthor.apply(this,arguments);}function _byAuthor(){_byAuthor=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var newData,_iterator3,_step3,_loop2,data,_iterator4,_step4,author,fullSize,openRate;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newData={authors:[]};_iterator3=_createForOfIteratorHelper(oldData.domains);try{_loop2=function _loop2(){var item=_step3.value;var author=item.data.author.slice(item.data.author.indexOf('<')+1,item.data.author.indexOf('>'));if(!newData.authors.find(function(e){return e.author===author;})){var newItem={author:author,count:1,emails:[_objectSpread({domain:item.domain},item.data)]};newData.authors.push(newItem);}else{var index=newData.authors.findIndex(function(x){return x.author===author;});newData.authors[index].count++;newData.authors[index].emails.push(_objectSpread({domain:item.domain},item.data));}};for(_iterator3.s();!(_step3=_iterator3.n()).done;){_loop2();}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}newData.authors.sort(function(a,b){return b.count-a.count;});newData.authors=newData.authors.slice(0,10);data={authors:[]};_iterator4=_createForOfIteratorHelper(newData.authors);try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){author=_step4.value;fullSize=author.emails.reduce(function(a,b){return a+b.size;},0)/1000000;openRate=author.emails.reduce(function(a,b){return a+b.openStatus;},0)/author.emails.length*100;data.authors.push({author:author.author,fullSize:fullSize.toFixed(2),openRate:openRate.toFixed(2),count:author.count});}}catch(err){_iterator4.e(err);}finally{_iterator4.f();}return _context2.abrupt(\"return\",data);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _byAuthor.apply(this,arguments);}export function bySubDomain(){return _bySubDomain.apply(this,arguments);}function _bySubDomain(){_bySubDomain=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){var newData,_iterator5,_step5,_loop3,data,_iterator6,_step6,subDomain,fullSize,openRate;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:newData={subDomains:[]};_iterator5=_createForOfIteratorHelper(oldData.domains);try{_loop3=function _loop3(){var item=_step5.value;var subDomain=item.domain;if(!newData.subDomains.find(function(e){return e.subDomain===subDomain;})){var newItem={subDomain:subDomain,count:1,emails:[_objectSpread({domain:item.domain},item.data)]};newData.subDomains.push(newItem);}else{var index=newData.subDomains.findIndex(function(x){return x.subDomain===subDomain;});newData.subDomains[index].count++;newData.subDomains[index].emails.push(_objectSpread({domain:item.domain},item.data));}};for(_iterator5.s();!(_step5=_iterator5.n()).done;){_loop3();}}catch(err){_iterator5.e(err);}finally{_iterator5.f();}newData.subDomains.sort(function(a,b){return b.count-a.count;});newData.subDomains=newData.subDomains.slice(0,10);data={subDomains:[]};_iterator6=_createForOfIteratorHelper(newData.subDomains);try{for(_iterator6.s();!(_step6=_iterator6.n()).done;){subDomain=_step6.value;fullSize=subDomain.emails.reduce(function(a,b){return a+b.size;},0)/1000000;openRate=subDomain.emails.reduce(function(a,b){return a+b.openStatus;},0)/subDomain.emails.length*100;data.subDomains.push({subDomain:subDomain.subDomain,fullSize:fullSize.toFixed(2),openRate:openRate.toFixed(2),count:subDomain.count});}}catch(err){_iterator6.e(err);}finally{_iterator6.f();}return _context3.abrupt(\"return\",data);case 9:case\"end\":return _context3.stop();}}},_callee3);}));return _bySubDomain.apply(this,arguments);}","map":{"version":3,"names":["data","oldData","byDomain","newData","domains","item","mainDomain","domain","split","slice","join","find","e","newItem","count","emails","openStatus","size","push","index","findIndex","x","sort","a","b","fullSize","reduce","openRate","length","toFixed","byAuthor","authors","author","indexOf","bySubDomain","subDomains","subDomain"],"sources":["/Users/hadleymcpartlin/Documents/GitHub/hacktx-22-project/src/api/dataTransform.js"],"sourcesContent":["import data from './data.json';\n\nconst oldData = data;\n\nexport async function byDomain() {\n    const newData = {domains: []};\n\n    for (let item of oldData.domains) {\n        const mainDomain = item.domain.split('.').slice(-2).join('.');\n        if (!newData.domains.find(e => e.domain === mainDomain)) {\n            const newItem = {\n                domain: mainDomain,\n                count: 1,\n                emails: [{openStatus: item.data.openStatus, size: item.data.size}]\n            };\n            newData.domains.push(newItem);\n        } else {\n            const index = newData.domains.findIndex(x => x.domain === mainDomain);\n            newData.domains[index].count++;\n            newData.domains[index].emails.push({openStatus: item.data.openStatus, size: item.data.size});\n        }\n    }\n    newData.domains.sort((a, b) => b.count - a.count);\n    newData.domains = newData.domains.slice(0, 10);\n    const data = {domains: []};\n    for (let domain of newData.domains) {\n        const fullSize = domain.emails.reduce((a, b) => a + b.size, 0) / 1_000_000;\n        const openRate = domain.emails.reduce((a, b) => a + b.openStatus, 0) / domain.emails.length * 100;\n        data.domains.push({\n            domain: domain.domain, fullSize: fullSize.toFixed(2),\n            openRate: openRate.toFixed(2), count: domain.count\n        });\n    }\n    return data;\n}\n\nexport async function byAuthor() {\n    const newData = {authors: []};\n    for (let item of oldData.domains) {\n        const author = item.data.author.slice(item.data.author.indexOf('<') + 1, item.data.author.indexOf('>'));\n        if (!newData.authors.find(e => e.author === author)) {\n            const newItem = {author, count: 1, emails: [{domain: item.domain, ...item.data}]};\n            newData.authors.push(newItem);\n        } else {\n            const index = newData.authors.findIndex(x => x.author === author);\n            newData.authors[index].count++;\n            newData.authors[index].emails.push({domain: item.domain, ...item.data});\n        }\n    }\n    newData.authors.sort((a, b) => b.count - a.count);\n    newData.authors = newData.authors.slice(0, 10);\n    const data = {authors: []};\n    for (let author of newData.authors) {\n        const fullSize = author.emails.reduce((a, b) => a + b.size, 0) / 1_000_000;\n        const openRate = author.emails.reduce((a, b) => a + b.openStatus, 0) / author.emails.length * 100;\n        data.authors.push({\n            author: author.author, fullSize: fullSize.toFixed(2),\n            openRate: openRate.toFixed(2), count: author.count\n        });\n    }\n\n    return data;\n}\n\nexport async function bySubDomain() {\n    const newData = {subDomains: []};\n    for (let item of oldData.domains) {\n        const subDomain = item.domain\n        if (!newData.subDomains.find(e => e.subDomain === subDomain)) {\n            const newItem = {subDomain, count: 1, emails: [{domain: item.domain, ...item.data}]};\n            newData.subDomains.push(newItem);\n        } else {\n            const index = newData.subDomains.findIndex(x => x.subDomain === subDomain);\n            newData.subDomains[index].count++;\n            newData.subDomains[index].emails.push({domain: item.domain, ...item.data});\n        }\n    }\n    newData.subDomains.sort((a, b) => b.count - a.count);\n    newData.subDomains = newData.subDomains.slice(0, 10);\n    const data = {subDomains: []};\n    for (let subDomain of newData.subDomains) {\n\n        const fullSize = subDomain.emails.reduce((a, b) => a + b.size, 0) / 1_000_000;\n        const openRate = subDomain.emails.reduce((a, b) => a + b.openStatus, 0) / subDomain.emails.length * 100;\n        data.subDomains.push({\n            subDomain: subDomain.subDomain,\n            fullSize: fullSize.toFixed(2),\n            openRate: openRate.toFixed(2),\n            count: subDomain.count\n        })\n        ;\n    }\n\n    return data;\n\n}\n\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}